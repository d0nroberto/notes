# Commands for Administring Solaris ALOM cards

### ALOM Hosts
Below is a list of the make and model of servers that contain ALOM cards.

|Make|Model|
|------|-----|
|Sun Fire|V125 V210 V215 V240 V250 V440 V445|
|Sun Blade|T6300|
|SPARC|T1000 T2000|

|ALOM Command|ILOM Command|Summary|
|----------------|-------|-----------------------|
|password|set /SP/users/username password|Changes the login password of the current user|
|restartssh|set /SP/services/ssh restart_sshd_action=true|Restarts the SSH server so that new host keys generated by the *ssh-keygen* command are reloaded|
|setdate [[mmdd]HHMM / mmddHHMM[cc]yy][.SS]|set /SP/clock datetime=*value*|Sets ALOM CMT date and time|
|set /SP reset_to_defaults=[none/factory/all]|setdefaults [-a]|Resets all ALOM CMT configuration parameters to their default values. The -a option resets the user information to the default (one *admin* account only)|
|setkeyswitch [normal/stby/diag/locked]|set /SYS keyswitch_state=*value*|Sets the status of the virtual keyswitch. Setting the virtual keyswitch to standby (*stby*) powers off the server. Before powering off the host server, ALOM CMT asks for a confirmation|
|setsc [param] [value]|set target property=value|Sets the specified ALOM CMT parameter to the assigned value|
|setupsc|No equivalent in ILOM|Runs the interactive configuration script. This script configures the ALOM CMT configuration variables|
|showplatform [-v]|show /HOST|Displays information about the host systems hardware configuration, and whether the hardware is providing service. The -v option displays verbose information about the displayed components|
|showfru|Use the ILOM *show [FRU]* command to display static FRU information. (For dynamic FRU information, use the ALOM CMT *showfru* command.)|Displays information about the field-replaceable units (FRUs) in a host server|
|showusers -g [lines]||show level all o table /SP/sessions|Displays a list of users currently logged in to ALOM CMT. The display for this command has a similar format to that of the UNIX command *who*. The *-g* option pauses the display after the number of lines you specify for *lines*.|
|showhost version|show /HOST| Displays version information for host-side components. The *version* option displays the same information as the *showhost* command with no option|
|showkeyswitch|show /SYS keyswitch_state|Displays status of virtual keyswitch|
|showsc [param]|show  target  property|Displays the current nonvolatile random access memory (NVRAM) configuration parameters|
|showdate|show /SP/clock datetime|Displays the ALOM CMT date. ALOM CMT time is expressed in Coordinated Universal Time (UTC) rather than local time. The Solaris OS and ALOM CMT time are not synchronized|
|ssh-keygen  -l  ssh-keygen  -r; ssh-keygen -t  {rsa/dsa}|show /SP/services/ssh/keys rsa/dsa; set /SP/services/ssh generate_new_key_action=true; set /SP/services/ssh generate_new_key_type=[rsa/dsa]|Generates Secure Shell (SSH) host keys and displays the host key fingerprint on the SC|
|usershow  [username]|show /SP/users |Displays a list of all user accounts and permission levels, and whether passwords are assigned.|
|useradd username|create /SP/users/ username|Adds a user account to ALOM CMT|
|userdel  [-y] username|delete [script] /SP/users/ username|Deletes a user account from ALOM CMT. The -y  option enables you to skip the confirmation question|
|userpassword [username]|set /SP/users/ username password|Sets or changes a user password.|
|userperm  [username] [a/u/c/r/o/s]|set /SP/users/ username role= permissions [a/u/c/r/o/s]|Sets the permission level for a user account|


### ALOM CMT Shell Log Commands

|ALOM Command|ILOM Command|Summary|
|----------------|-------|-----------------------|
|showlogs -p [r/p] [-b lines/ -e lines/ -v ] [-g lines]|show /SP/logs/event/list|Displays the history of all events logged in the event log, or major and critical events in the event log. The -p option selects whether to display only major and critical events from the event log (r) or to display all of the events from the event log (p).  -g lines specifies the number of lines to display before pausing.  -e lines displays n lines from the end of the buffer.  -b lines displays n lines from the beginning of the buffer.  -v displays the entire buffer|
|consolehistory [-b lines/ -e lines/ -v] [-g lines] [boot/run]|set /SP/console/history property=value[set /SP/console/history  property=value][set /SP/console/history property=value]; show /SP/console/history where property can be: line_count=[lines] default value is "" (none), meaning there is no limit to the total number of lines retrieved from the buffer. pause_count =[count] default value is "" (none), meaning there is no limit to the count of lines displayed per pause. start_from=[end /beginning] default value is end.|Displays the host server console output buffers. -g lines specifies the number of lines to display before pausing.  -e lines displays n lines from the end of the buffer. -b lines displays n lines from the beginning of the buffer. -v displays the entire buffer|


### ALOM CMT Shell Status and Control Commands

|ALOM Command|ILOM Command|Summary|
|----------------|-------|-----------------------|
|showenvironment|show o table level all /SYS|Displays the environmental status of the host server. This information includes system temperatures, power supply status, front panel LED status, hard disk drive status, fan status, voltage, and current sensor status.|
|showpower [-v] |show /SP/powermgmt |Displays power metrics for the host server|
|shownetwork [-v] |show /SP/network |Displays the current network configuration information. The -v option shows additional information about your network, including information about your DHCP server|
|console [-f] |start [-force] /SP/console |Connects to the host system console. The -f option forces the console write lock from one user to another.In ILOM, the -force option terminates the console, permitting you to start a new console.|
|break [-D][-c]|set /HOST send_break_action=[break/dumpcore] [start /SP/console]|Drops the host server from running the Solaris OS software into OpenBoot PROM or kmdb  depending upon the mode in which the Solaris software was booted.|
|bootmode [normal] [reset_nvram] [config= configname][bootscript = string]|set /HOST/bootmode  property= value (where property is state,  config,  or script)|Controls the host server OpenBoot PROM firmware method of booting|
|flashupdate -s IPaddr -f pathname [-v] [-y] [-c]|load source tftp:// ipaddr/ pathname|Downloads and updates system firmware (both host firmware and ALOM CMT firmware). For ILOM, ipaddr must be a TFTP server. If you use DHCP, you can replace ipaddr with the name of the TFTP host.The -y option enables you to skip the confirmation question.  The -c option enables you to update system firmware on your server without preserving configuration information.  After configuration information has been deleted (by having used the -c option or the set /SP reset_to_defaults=factory command), you must use the -c option when replacing system firmware that includes ILOM 3.0 with firmware that includes ILOM 2.0. If you omit the -c option, the flashupdate command attempts to restore preserved configuration information, halting the firmware downgrade because that configuration information is absent|
|reset [-y] [-f] [-c]; reset -d [-n] [-y] [-f] [-c] |reset [-script][force] /SYS [start /SP/console]|Generates a hardware reset on the host server.The -y option enables you to skip the confirmation question. The -f option forces a hardware reset. The -c  option starts the console. The -d option gracefully resets the control domain. The -n option sets the auto-boot variable to disable (lasts for one reset).The -y option enables you to skip the confirmation question.The -f option forces a hardware reset.The -c option starts the console|
|powercycle [-y] [-f] |stop [script] [force] /SYS start [ script] [force] /SYS|poweroff followed by poweron. The -f option forces an immediate poweroff , otherwise the command attempts a graceful shutdown.|
|poweroff  [-y][-f]|stop [script][force] /SYS|Removes the main power from the host server. The -y option enables you to skip the confirmation question. ALOM CMT attempts to shut the server down gracefully. The -f option forces an immediate shutdown|
|poweron |start /SYS |Applies the main power to the host server or FRU.|
|setlocator [on/off]|set /SYS/LOCATE value=value|Turns the Locator LED on the server on or off|
|showfaults [-v] |show /SP/faultmgmt |Displays current valid system faults|
|clearfault  UUID|set /SYS/ component clear_fault_action=true |Manually repairs system faults|
|showlocator |show /SYS/LOCATE |Displays the current state of the Locator LED as either on  or off|
|removeblade [-y] |set /SYS prepare_to_remove_action=true|Pauses the service processor tasks and illuminates the blue OK to Remove LED, indicating that it is safe to remove the blade. The -y option enables you to skip the confirmation question|
|unremoveblade|set /SYS return_to_service_action=true|Turns off the OK to Remove LED and restores the service processor state|


### ALOM CMT Shell FRU Commands

|ALOM Command|ILOM Command|Summary|
|----------------|-------|-----------------------|
|setfru -c data|set /SYS customer_frudata= data|The -c option enables you to store information (such as inventory codes) on all FRUs in a system|
|showfru -g lines [s/d]  [FRU]|show [FRU]|Displays information about the FRUs in a host server|
|removefru [-y] [FRU]|set /SYS/PS0 prepare_to_remove_action=true|Prepares a FRU (for example, a power supply) for removal. The -y option enables you to skip the confirmation question|


## ALOM CMT Shell Automatic System Recovery (ASR) Commands

|ALOM Command|ILOM Command|Summary|
|----------------|-------|-----------------------|
|enablecomponent component|set /SYS/ component component_state=enabled|Re-enables a component that has been disabled using the disablecomponent command|
|disablecomponent component|set /SYS/ component component_state=disabled|Disables a component|
|showcomponent component|show /SYS/ component component_state|Displays system components and their test status|
|clearasrdb |No equivalent in ILOM|Removes all entries from the list of disabled components|


### ALOM CMT Shell Miscellaneous Commands

|ALOM Command|ILOM Command|Summary|
|----------------|-------|-----------------------|
|help [command]|help|Displays a list of all ALOM CMT commands with their syntax and a brief description of how each command works. Specifying a command name as an option enables you to view the help for that command|
|resetsc [-y]|reset [-script] /SP |Reboots ALOM CMT. The -y option enables you to skip the confirmation question|
|userclimode username shelltype|set /SP/users/username cli_mode= shelltype|Sets the type of shell to shelltype, where shelltype is default  or alom|
|logout|exit|Logs out from an ALOM CMT shell session|
|setsc sys_ioreconfigure value|set /HOST ioreconfigure= value|Sets the ioreconfiguration parameter to value, where value is true, false, or next-boot|

